<div class="container mt-4">
    <div class="row g-3">
    <%= form_with url: books_path, method: :get, local: true, class: "d-flex mb-3 align-items-center" do |f| %>
    <%= f.text_field :q, value: params[:q], class: "form-control me-2", placeholder: "タイトル・ISBN・著者名・タグで検索" %>
    <%= f.label :sort, "並び替え", class: "visually-hidden" %>
    <%= f.select :sort,
              options_for_select(@sort_options.map { |value, label| [label, value] }, @sort_param),
              {},
              class: "form-select me-2" %>
    <%= f.submit "検索", class: "btn btn-primary" %>
    <% end %>
        <% if @books.present? %>
            <% @books.each do |book| %>
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title mb-2"><%= link_to book.title, book_path(book), class: "stretched-link" %></h5>
                            <h6 class="card-subtitle mb-3 text-muted"><%= book.publisher %></h6>
                            <% if book.authors.any? %>
                                <div class="mt-auto">
                                    <small class="text-secondary">著者</small>
                                    <ul class="list-unstyled mb-0">
                                        <% book.authors.each do |author| %>
                                            <li><%= author.name %></li>
                                        <% end %>
                                    </ul>
                                </div>
                            <% end %>
                        </div>
                    </div>
                </div>
            <% end %>
        <% else %>
            <div class="col-12">
                <div class="alert alert-info text-center">
                    <h5 class="mb-2">書籍が見つかりませんでした。</h5>
                    <p class="mb-0 text-muted">検索条件を変更して再度お試しください。</p>
                </div>
            </div>
        <% end %>
    </div>
    <% if @books.respond_to?(:total_pages) && @books.total_pages > 1 %>
        <div class="d-flex justify-content-center mt-4">
            <%= paginate @books, params: { q: params[:q], sort: @sort_param } %>
        </div>
    <% end %>
</div>